[gd_scene load_steps=18 format=3 uid="uid://1xfvj1p7ev1x"]

[ext_resource type="Script" uid="uid://cvv8xc3p5ctti" path="res://Scense/game_on.gd" id="1_fa28u"]
[ext_resource type="PackedScene" uid="uid://chwnd3cftco3p" path="res://Map/floor.tscn" id="1_kh0yo"]
[ext_resource type="PackedScene" uid="uid://dd3yne4nsjp6u" path="res://Map/wall.tscn" id="2_i1awr"]
[ext_resource type="PackedScene" uid="uid://cq3n4hchfl5v5" path="res://Map/trap.tscn" id="3_35vgc"]
[ext_resource type="PackedScene" uid="uid://ctaknjncpv3em" path="res://Map/FallTrap.tscn" id="4_bvni8"]
[ext_resource type="PackedScene" uid="uid://d01ykwgu2i8xg" path="res://Player/player.tscn" id="5_b73pd"]
[ext_resource type="Script" uid="uid://cg2p21p8nl2x3" path="res://Scense/control.gd" id="5_i1awr"]
[ext_resource type="PackedScene" uid="uid://dlhsbpjogvpsu" path="res://Map/win_point1.tscn" id="6_fa28u"]
[ext_resource type="FontFile" uid="uid://mlr2rkqs2j7g" path="res://Font/Roboto-VariableFont_wdth,wght.ttf" id="7_35vgc"]
[ext_resource type="PackedScene" uid="uid://ds4wxsuj6lcwo" path="res://Map/mini_map_camera.tscn" id="7_b73pd"]
[ext_resource type="PackedScene" uid="uid://d2lq57pg6hrb6" path="res://Map/glasswall.tscn" id="7_kh0yo"]
[ext_resource type="PackedScene" uid="uid://dlhsbpjogvpsu" path="res://Map/win_point1.tscn" id="6_fa28u"]
[ext_resource type="PackedScene" uid="uid://0abf2fh8yu86" path="res://Map/win_point2.tscn" id="7_p1rog"]
[ext_resource type="PackedScene" uid="uid://ckerfo4jllctn" path="res://win_ui.tscn" id="13_p1rog"]

[sub_resource type="Environment" id="Environment_7dr2q"]
volumetric_fog_enabled = true
volumetric_fog_density = 0.2
volumetric_fog_albedo = Color(0.3403393, 0.34033936, 0.34033918, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_35vgc"]
bg_color = Color(0.1764706, 0.16862746, 0.13333334, 1)

[sub_resource type="FontVariation" id="FontVariation_bvni8"]
base_font = ExtResource("7_35vgc")

[sub_resource type="LabelSettings" id="LabelSettings_35vgc"]

[node name="MainLevel" type="Node3D"]

[node name="floor" parent="." instance=ExtResource("1_kh0yo")]
transform = Transform3D(5, 0, 0, 0, 1, 0, 0, 0, 5, 0, 0, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7dr2q")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.53358495, 0.84574646, 0, -0.84574646, 0.53358495, 0, 0, 0)
visible = false

[node name="wall" parent="." instance=ExtResource("2_i1awr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2.8369336)

[node name="Trap" parent="." instance=ExtResource("3_35vgc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.8027365, 0.0059845448, -1.5025456)
collision_layer = 7
collision_mask = 7

[node name="FallTrap" parent="." instance=ExtResource("4_bvni8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.136252, 0.016440094, -1.1265135)
collision_layer = 7
collision_mask = 7

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("5_i1awr")
start_seconds = 75

[node name="HBoxContainer" type="HBoxContainer" parent="Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewportContainer" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
stretch = true

[node name="SubViewport" type="SubViewport" parent="Control/HBoxContainer/SubViewportContainer"]
handle_input_locally = false
canvas_cull_mask = 4294967293
size = Vector2i(574, 648)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Player1" parent="Control/HBoxContainer/SubViewportContainer/SubViewport" instance=ExtResource("5_b73pd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0484784, 0)
collision_layer = 3

[node name="SubViewportContainer2" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
stretch = true

[node name="SubViewport" type="SubViewport" parent="Control/HBoxContainer/SubViewportContainer2"]
handle_input_locally = false
canvas_cull_mask = 4294967291
size = Vector2i(574, 648)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Player2" parent="Control/HBoxContainer/SubViewportContainer2/SubViewport" instance=ExtResource("5_b73pd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.263363, 0.8142977, 0)
collision_layer = 4
player_id = 2

[node name="GameTimer" type="Timer" parent="Control"]

[node name="Panel" type="Panel" parent="Control"]
layout_mode = 0
offset_left = 505.0
offset_top = -0.9999999
offset_right = 577.0
offset_bottom = 22.0
scale = Vector2(2.1257308, 1.6399997)
theme_override_styles/panel = SubResource("StyleBoxFlat_35vgc")

[node name="Label" type="Label" parent="Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -38.99994
offset_right = 33.00006
offset_bottom = 23.0
grow_horizontal = 2
scale = Vector2(1.5483611, 1.479999)
theme_override_fonts/font = SubResource("FontVariation_bvni8")
theme_override_font_sizes/font_size = 64
label_settings = SubResource("LabelSettings_35vgc")

[node name="SubViewportContainer3" type="SubViewportContainer" parent="Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -117.0
offset_top = -227.0
offset_right = 395.0
offset_bottom = 285.0
grow_horizontal = 2
grow_vertical = 0
scale = Vector2(0.46948817, 0.44451594)

[node name="SubViewport" type="SubViewport" parent="Control/SubViewportContainer3"]
handle_input_locally = false
render_target_update_mode = 4

[node name="Mini_Map_Camera" parent="Control/SubViewportContainer3/SubViewport" instance=ExtResource("7_b73pd")]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 1.1786783, 19.296812, 0.27098823)

[node name="glasswall" parent="." instance=ExtResource("7_kh0yo")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 2.485922, 0, 0)

[node name="Node3D" type="Node3D" parent="."]
script = ExtResource("1_fa28u")
win_p1_path = NodePath("Win_Point1")
win_p2_path = NodePath("Win_Point2")
win_ui_path = NodePath("Win UI")

[node name="Win_Point1" parent="Node3D" instance=ExtResource("6_fa28u")]
transform = Transform3D(4.8904705, 0, 0, 0, 4.5859547, 0, 0, 0, 3.865, 4.6601977, 1.4851382, 4.404766)

[node name="Win_Point2" parent="Node3D" instance=ExtResource("7_p1rog")]
transform = Transform3D(5.75, 0, 0, 0, 5.75, 0, 0, 0, 5.75, 7.5777917, 0.9478424, -2.2511606)

[node name="Win UI" parent="Node3D" instance=ExtResource("13_p1rog")]
manager_path = NodePath("..")
